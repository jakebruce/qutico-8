pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
--picofacto
--by jake

function _init()
	selection=1
	items={"belt","mine","factory"}
	curx=5
	cury=5
	camx=0
	camy=0
	tiles={}
end

function _update60()
	if (btnp(⬅️)) curx-=1
	if (btnp(➡️)) curx+=1
	if (btnp(⬆️)) cury-=1
	if (btnp(⬇️)) cury+=1
	if (btnp(🅾️)) selection+=1
	if (selection>#items) selection=1

	if (camx-curx>-4) camx-=1
	if (camx-curx<-12) camx+=1
	if (camy-cury>-4) camy-=1
	if (camy-cury<-12) camy+=1

	if btnp(❎) then
	 add(tiles, {
			n=selection,
			x=curx,
			y=cury,
		})
	end
end

function _draw()
	cls(4)
	draw_world()
	draw_hud()
end

function draw_world()
	camera(camx*8,camy*8)
	for tile in all(tiles) do
		n=tile.n+flr(time()*4)%4*16
		spr(n,tile.x*8,tile.y*8)
	end
	rect(curx*8-1,cury*8-1,curx*8+8,cury*8+8,7)
end

function draw_hud()
	camera()
	rectfill(0,116-4,127,127,1)
	for i,item in pairs(items) do
		rectfill(i*16-14,116-2,i*16-2,128-3,15)
		spr(i,i*16-12,116)
	end
	rect(
		selection*16-13,116-1,
		selection*16-3,128-4,7)
end
__gfx__
00000000000000000555555500060600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000066666000666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700555555550055555000550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770006ddd6ddd0006660055555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000d6ddd6dd000555005dddddd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700d6ddd6dd000060005dd7d7d5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006ddd6ddd000050005dddddd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555550000000055555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000005555555000006006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000666600000006660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555550555550000550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000d6ddd6dd0066000055555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000dd6ddd6d005550005dddddd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000dd6ddd6d000600005dd7d7d5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000d6ddd6dd000500005dddddd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555550000000055555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000005555555000000606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000066660000600066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555550555550000550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000dd6ddd6d0006600055555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ddd6ddd6005550005dddddd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ddd6ddd6000600005dd7d7d5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000dd6ddd6d000500005dddddd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555550000000055555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000555555500060066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000066660000066006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555550055555000550060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ddd6ddd60006600055555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006ddd6ddd000555005dddddd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006ddd6ddd000060005dd7d7d5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ddd6ddd6000050005dddddd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555550000000055555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
